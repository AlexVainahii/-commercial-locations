{"version":3,"file":"static/js/293.35209ab1.chunk.js","mappings":"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","sources":["components/AddForm.jsx","pages/Add.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet-arrowheads';\nimport 'leaflet-osm';\nimport 'leaflet/dist/leaflet.css';\n\nimport myLocationIcon from '../images/myLocation.png';\nimport { FaCrosshairs, FaMap } from 'react-icons/fa';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeMapType } from 'redux/MapType/mapSlice';\nimport { addCommerce } from 'redux/Comercial/operationsCommercial';\nimport { selectMapType } from 'redux/selectors';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  border: 1px solid #ccc;\n  margin-bottom: 20px;\n  height: 100%;\n`;\n\nconst Form = styled.form`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\nconst FormHeader = styled.h2`\n  font-size: 24px;\n  margin-bottom: 5px;\n`;\nconst InputLabel = styled.label`\n  margin-bottom: 10px;\n  width: 80%;\n`;\n\nconst Input = styled.input`\n  padding: 6px;\n  font-size: 14px;\n  border-radius: 5px;\n  border: 1px solid #ccc;\n  margin-top: 4px;\n  width: 100%;\n`;\n\nconst SubmitButton = styled.button`\n  padding: 10px;\n  background: #2e3a59;\n  color: #fff;\n  border: none;\n  margin: 0 auto;\n  border-radius: 5px;\n  cursor: pointer;\n  width: 60%;\n`;\n\nconst MapContainer = styled.div`\n  height: 700px;\n  width: 100%;\n`;\n\nconst ControlButtons = styled.div`\n  z-index: 1000;\n  bottom: 25px;\n  right: 10px;\n  position: absolute;\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 10px;\n`;\n\nconst ControlButton = styled.button`\n  background: ${({ active }) => (active === 'true' ? 'none' : '#2e3a59')};\n  padding: 5px;\n  box-shadow: ${({ active }) =>\n    active === 'true' ? 'none' : '0px 0px 10px 0px #fff'};\n  border-radius: 5px;\n  border: none;\n  cursor: pointer;\n  margin-right: 10px;\n`;\n\nconst AddForm = () => {\n  const mapContainerRef = useRef(null);\n  const mapRef = useRef(null);\n  const dispatch = useDispatch();\n  const [userLocation, setUserLocation] = useState(null);\n  const [newCommerce, setNewCommerce] = useState({\n    name: '',\n    address: '',\n    area: '',\n    price: '',\n    location: null,\n  });\n\n  const mapType = useSelector(selectMapType);\n\n  const handleUserLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          setUserLocation({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          });\n          setNewCommerce(prev => ({\n            ...prev,\n            location: {\n              lat: position.coords.latitude,\n              lng: position.coords.longitude,\n            },\n          }));\n        },\n        error => {\n          console.error('Geolocation error:', error);\n        }\n      );\n    } else {\n      console.error('Geolocation is not supported by this browser.');\n    }\n  };\n\n  useEffect(() => {\n    handleUserLocation();\n  }, []);\n\n  const handleMapClick = event => {\n    const clickedCoordinates = event.latlng;\n    setUserLocation({\n      lat: clickedCoordinates.lat,\n      lng: clickedCoordinates.lng,\n    });\n    const apiKey = 'AIzaSyCXj6myUOGLNmVBVk0FVDL4vLEtrx37yAU';\n    const latitude = clickedCoordinates.lat; // Широта\n    const longitude = clickedCoordinates.lng; // Довгота\n    fetch(\n      `https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=${apiKey}`\n    )\n      .then(response => response.json())\n      .then(data => {\n        if (data.status === 'OK' && data.results.length > 0) {\n          const address = data.results[0].formatted_address;\n          setNewCommerce(prevCommerce => ({\n            ...prevCommerce,\n            address: address,\n          }));\n          console.log('Адреса:', address);\n        } else {\n          console.log('Не вдалося знайти адресу за вказаними координатами.');\n        }\n      })\n      .catch(error => {\n        console.error('Помилка запиту до Google Maps Geocoding API:', error);\n      });\n    setNewCommerce(prevCommerce => ({\n      ...prevCommerce,\n      location: {\n        lat: clickedCoordinates.lat,\n        lng: clickedCoordinates.lng,\n      },\n    }));\n  };\n\n  const toggleMapType = () => {\n    const newMapType = mapType === 'standard' ? 'hybrid' : 'standard';\n    dispatch(changeMapType(newMapType));\n\n    mapRef.current.eachLayer(layer => {\n      if (layer instanceof L.TileLayer) {\n        layer.setUrl(\n          `https://{s}.google.com/vt/lyrs=${newMapType}&x={x}&y={y}&z={z}`\n        );\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (userLocation) {\n      const mapCenter = userLocation;\n      const zoom = 11;\n      mapRef.current = L.map(mapContainerRef.current).setView(mapCenter, zoom);\n      const MyLocationIcon = L.icon({\n        iconUrl: myLocationIcon,\n        iconSize: [80, 91],\n        iconAnchor: [35, 74],\n        popupAnchor: [1, -34],\n        shadowSize: [41, 41],\n        title: 'Маркер',\n        alt: 'Маркер',\n      });\n      const initialMapType = mapType === 'standard' ? 'm' : 'y';\n      L.tileLayer(\n        `https://{s}.google.com/vt/lyrs=${initialMapType}&x={x}&y={y}&z={z}`,\n        {\n          attribution:\n            'Map data &copy; <a href=\"https://www.google.com/\">Google</a>',\n          subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],\n          maxZoom: 20,\n        }\n      ).addTo(mapRef.current);\n\n      mapRef.current.on('click', handleMapClick);\n      if (userLocation) {\n        const userMarker = L.marker(userLocation, {\n          icon: MyLocationIcon,\n        }).addTo(mapRef.current);\n\n        userMarker.on('mouseover', () => {\n          userMarker.setIcon(\n            L.icon({\n              ...MyLocationIcon.options,\n            })\n          );\n\n          userMarker.bindPopup('Ваше місце розташування').openPopup();\n        });\n      }\n\n      return () => {\n        mapRef.current.off('click', handleMapClick);\n        mapRef.current.remove();\n      };\n    }\n  }, [userLocation, mapType]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    dispatch(addCommerce(newCommerce));\n\n    setNewCommerce({\n      name: '',\n      address: '',\n      area: '',\n      price: '',\n      location: userLocation,\n    });\n  };\n\n  return (\n    <Container>\n      <FormHeader>Додати комерційний об'єкт</FormHeader>\n      <Form onSubmit={handleSubmit}>\n        <InputLabel>\n          Назва:\n          <Input\n            type=\"text\"\n            value={newCommerce.name}\n            onChange={e =>\n              setNewCommerce(prevCommerce => ({\n                ...prevCommerce,\n                name: e.target.value,\n              }))\n            }\n          />\n        </InputLabel>\n        <InputLabel>\n          Адреса:\n          <Input\n            type=\"text\"\n            value={newCommerce.address}\n            onChange={e =>\n              setNewCommerce(prevCommerce => ({\n                ...prevCommerce,\n                address: e.target.value,\n              }))\n            }\n          />\n        </InputLabel>\n        <InputLabel>\n          Площа:\n          <Input\n            type=\"number\"\n            value={newCommerce.area}\n            onChange={e =>\n              setNewCommerce(prevCommerce => ({\n                ...prevCommerce,\n                area: e.target.value,\n              }))\n            }\n          />\n        </InputLabel>\n        <InputLabel>\n          Ціна:\n          <Input\n            type=\"number\"\n            value={newCommerce.price}\n            onChange={e =>\n              setNewCommerce(prevCommerce => ({\n                ...prevCommerce,\n                price: e.target.value,\n              }))\n            }\n          />\n        </InputLabel>\n        <InputLabel>\n          Координати:\n          <Input\n            type=\"text\"\n            value={`[${newCommerce.location?.lat}, ${newCommerce.location?.lng}]`}\n            disabled\n          />\n        </InputLabel>\n\n        <SubmitButton type=\"submit\">Додати комерційний об'єкт</SubmitButton>\n      </Form>\n\n      <MapContainer style={{ height: '390px' }} ref={mapContainerRef} />\n\n      <ControlButtons>\n        <ControlButton\n          active={(mapType === 'standard').toString()}\n          onClick={() => handleUserLocation()}\n        >\n          <FaCrosshairs\n            size={40}\n            color={mapType === 'standard' ? '#2e3a59' : '#fff'}\n          />\n        </ControlButton>\n        <ControlButton\n          active={(mapType === 'standard').toString()}\n          onClick={toggleMapType}\n        >\n          <FaMap\n            size={40}\n            color={mapType === 'standard' ? '#2e3a59' : '#fff'}\n          />\n        </ControlButton>\n      </ControlButtons>\n    </Container>\n  );\n};\n\nexport default AddForm;\n","import AddForm from '../components/AddForm';\n\nconst Add = () => {\n  return <AddForm />;\n};\nexport default Add;\n"],"names":["Container","styled","_templateObject","_taggedTemplateLiteral","Form","_templateObject2","FormHeader","_templateObject3","InputLabel","_templateObject4","Input","_templateObject5","SubmitButton","_templateObject6","MapContainer","_templateObject7","ControlButtons","_templateObject8","ControlButton","_templateObject9","_ref","active","_ref2","_newCommerce$location","_newCommerce$location2","mapContainerRef","useRef","mapRef","dispatch","useDispatch","_useState","useState","_useState2","_slicedToArray","userLocation","setUserLocation","_useState3","name","address","area","price","location","_useState4","newCommerce","setNewCommerce","mapType","useSelector","selectMapType","handleUserLocation","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","prev","_objectSpread","error","console","useEffect","handleMapClick","event","clickedCoordinates","latlng","fetch","concat","then","response","json","data","status","results","length","formatted_address","prevCommerce","log","catch","mapCenter","current","L","setView","MyLocationIcon","iconUrl","myLocationIcon","iconSize","iconAnchor","popupAnchor","shadowSize","title","alt","initialMapType","attribution","subdomains","maxZoom","addTo","on","userMarker","icon","setIcon","options","bindPopup","openPopup","off","remove","_jsxs","children","_jsx","onSubmit","preventDefault","addCommerce","type","value","onChange","e","target","disabled","style","height","ref","toString","onClick","FaCrosshairs","size","color","newMapType","changeMapType","eachLayer","layer","setUrl","FaMap","AddForm"],"sourceRoot":""}